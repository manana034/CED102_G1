<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./css/common/product.css">
    <link rel="icon" href="../img/logo.ico" type="image/x-icon">
    <script src="./js/header.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.min.js"></script>    
    <title>Product</title>
</head>
<body>
    @@include('./layout/header.html')
    @@include('./layout/cart.html')

    <div class="prodContent" id="prodContent">
        <div class="prod_desc">
            <h5> {{prod.fdName}} </h5>
            <p>{{prod.fdCalPer}} Cal / per</p>
            <p v-html="prod.des"></p>
            <!-- <p> The calories you consume of the meal gets 50% discount.<p>
            <p> Ingredients
                dark chocolate (49%)<br>
                (cacao mass, coconut sugar,cacao butter),<br>
                roasted almonds (49%),
                cocoa powder, salt.for allergens,
                including cereals containing gluten,
                see ingredients in bold.</p> -->
        </div>
        <div class="productDetail">
            <div v-if="prod.calRate > 1" style="backgroundColor:#bf4659" class="prodimg">
                <img :src="prod.prodpic1">
            </div>
            <div v-else-if="prod.calRate < 1" style="backgroundColor:#2d6ca6" class="prodimg">
                <img :src="prod.prodpic1">
            </div>
            <div v-else-if="prod.calRate = 1" style="backgroundColor:#f9c530" class="prodimg">
                <img :src="prod.prodpic1">
            </div>
            <div class="prod1Info">
                <p>NT${{prod.price}}</p>
                <form>
                    <label for="quantity">QUANTITY : </label>
                    <div class="btn_number">
                        <span class="btn_minus"> &minus; </span>
                        <input type="number" name="quantity" id="quantity" value="1" min="1" max="10">
                        <span class="btn_add">  &plus; </span>
                    </div>                    
                </form>
                <button class="byn" @click="cart">ADD TO CART</button>
                <!-- <button class="wishlist"> WISH LIST</button> -->
            </div>
        </div>
        <div class="prod_infoall">
            <h6>ENJOY IT!</h6>
            <p>Vegan friendly. High in fibre. Store in a cool, dry place.<br>
            We’re so excited to have a brand new look. We don’t want to send our previous packaging to waste so your order might contain both old and new pack designs whilst we’re making this switch</p>
            <div class="prod1_pic">
                <img :src="prod.prodpic2">
                <img :src="prod.prodpic3">
            </div>
        </div>
       
    </div>
    <h6>MORE FITNESS?</h6>  
    @@include('./layout/moreproduct.html')
    

    <script>
    //buy now to cart
    // const buynow = document.querySelectorAll(".byn");

    // buynow.forEach(byn =>{
    //     byn.addEventListener("click",function(){
    //         cart.classList.add("opencart");
    //     })
    // })

    let vm = new Vue({
        el:"#prodContent",
        data:{
            prod:[],
            
        },
        methods: {
          cart(){
            cart.classList.add("opencart");
          },
        }
    })


      //資料庫
      const sessionId = sessionStorage.getItem("no");

      fetch(`./php/getProduct.php`).then(res => res.json())
                                    .then(data => {
                                        // console.log(data);
                                        data.forEach(d => {
                                            if(d.prodNo === sessionId){
                                                vm.prod = d;
                                                // console.log(vm.prod);
                                            }
                                        })
                                        // vm.prod = data;                                 
                                    });
                                                    // console.log(vm.prod);
                                                    // console.log(vm.prod);
                                                    // console.log(vm1.prods);
    </script>
    <script src="./js/cart.js"></script>
    <script src="./js/quantity.js"></script>

</body>
</html>